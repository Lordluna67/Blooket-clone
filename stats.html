<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stats - Blacket</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDpYoktMVRAeNm6TU-y54Ckmdkmfei_iRA",
            authDomain: "blacket-game.firebaseapp.com",
            projectId: "blacket-game",
            storageBucket: "blacket-game.firebasestorage.app",
            messagingSenderId: "82935109494",
            appId: "1:82935109494:web:48d1cdf9cf89973ead8c57"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
    </script>
    <style>
        body { display: flex; font-family: sans-serif; }
        #tabs { width: 200px; border-right: 1px solid #ccc; padding: 10px; }
        #tabs button { display: block; width: 100%; margin-bottom: 5px; }
        #main { flex: 1; padding: 20px; }
    </style>
</head>
<body>
    <!-- Left Tab Panel -->
    <div id="tabs">
        <button onclick="showTab('market')">Market</button>
        <button onclick="showTab('bizzar')">Bizzar</button>
        <button onclick="showTab('blooks')">Blooks</button>
        <button onclick="showTab('stats')">Stats</button>
        <button onclick="logout()">Logout</button>
    </div>

    <!-- Main Panel -->
    <div id="main">
        <h2 id="tab-title">Stats</h2>
        <div id="tab-content">
            <p id="user-email"></p>
            <p>Tokens: <span id="tokens">0</span></p>
            <p>Daily Spin Available: <span id="dailySpin">Yes</span></p>
        </div>
    </div>

    <script>
        // Auth check
        firebase.auth().onAuthStateChanged(user => {
            if (!user) window.location.href = "login.html";

            if (user) {
                document.getElementById("user-email").textContent = "Email: " + user.email;
                // Tokens
                if (!localStorage.getItem(user.email + "_tokens")) localStorage.setItem(user.email + "_tokens", 500);
                document.getElementById("tokens").textContent = localStorage.getItem(user.email + "_tokens");
                // Daily spin
                if (!localStorage.getItem(user.email + "_dailySpin")) localStorage.setItem(user.email + "_dailySpin", "true");
                document.getElementById("dailySpin").textContent = localStorage.getItem(user.email + "_dailySpin") === "true" ? "Yes" : "No";
            }
        });

        function logout() {
            firebase.auth().signOut().then(() => {
                window.location.href = "login.html";
            });
        }

        function showTab(tabName) {
            const main = document.getElementById("tab-content");
            const title = document.getElementById("tab-title");
            title.textContent = tabName.charAt(0).toUpperCase() + tabName.slice(1);
            if(tabName === 'stats') {
                main.innerHTML = `
                    <p id="user-email"></p>
                    <p>Tokens: <span id="tokens">0</span></p>
                    <p>Daily Spin Available: <span id="dailySpin">Yes</span></p>
                `;
                // Update values
                const user = firebase.auth().currentUser;
                if(user) {
                    document.getElementById("user-email").textContent = "Email: " + user.email;
                    document.getElementById("tokens").textContent = localStorage.getItem(user.email + "_tokens");
                    document.getElementById("dailySpin").textContent = localStorage.getItem(user.email + "_dailySpin") === "true" ? "Yes" : "No";
                }
            } else {
                main.innerHTML = `<p>${tabName} page coming soon!</p>`;
            }
        }
    </script>
</body>
</html>
